# Лекция: Условные выражения, циклы и структуры данных в C#

**Цель лекции:** Освоить фундаментальные конструкции языка C#, управляющие потоком выполнения программы, и понять основные принципы работы с простейшими структурами данных.

---

### **План лекции:**

1.  **Введение:** Понятие управляющих конструкций.
2.  **Условные выражения:**
    *   Оператор `if`, `else if`, `else`
    *   Тернарный оператор
    *   Оператор выбора `switch`
3.  **Циклы:**
    *   Цикл `while`
    *   Цикл `do...while`
    *   Цикл `for`
    *   Цикл `foreach`
    *   Ключевые слова `break` и `continue`
4.  **Структуры данных:**
    *   Понятие массива (`Array`)
    *   Список (`List<T>`)
    *   Словарь (`Dictionary<TKey, TValue>`)
5.  **Резюме**
6.  **Контрольные вопросы**

---

### **1. Введение**

Любая программа, от простейшего калькулятора до сложной enterprise-системы, следует определенному алгоритму. Алгоритм часто требует принимать решения и повторять действия. Для этого в языках программирования существуют **управляющие конструкции**.

*   **Условные выражения** позволяют выполнять различные блоки кода в зависимости от выполнения определенных условий (например, "если пользователь авторизован, показать главную страницу, иначе — показать форму входа").
*   **Циклы** позволяют многократно выполнять один и тот же блок кода, пока выполняется условие (например, "пока в базе данных есть непрочитанные сообщения, выводить их на экран").
*   **Структуры данных** позволяют организовать и хранить наборы данных для эффективного доступа и модификации (например, "список товаров в корзине", "коллекция зарегистрированных пользователей").

---

### **2. Условные выражения**

#### **Оператор `if`, `else if`, `else`**

Это самый распространенный способ ветвления логики программы.

**Синтаксис:**
```csharp
if (условие1)
{
    // Блок кода, выполняемый, если условие1 истинно (true)
}
else if (условие2)
{
    // Блок кода, выполняемый, если условие1 ложно (false), а условие2 истинно
}
else
{
    // Блок кода, выполняемый, если все предыдущие условия ложны
}
```

**Примеры:**

```csharp
// Пример 1: Простая проверка
int number = 10;
if (number > 0)
{
    Console.WriteLine("Число положительное.");
}

// Пример 2: Полное ветвление if-else
string password = "qwerty";
if (password == "secret")
{
    Console.WriteLine("Доступ разрешен.");
}
else
{
    Console.WriteLine("Неверный пароль.");
}

// Пример 3: Множественные условия с else if
int examScore = 85;
if (examScore >= 90)
{
    Console.WriteLine("Оценка: A");
}
else if (examScore >= 80)
{
    Console.WriteLine("Оценка: B"); // Выполнится этот блок
}
else if (examScore >= 70)
{
    Console.WriteLine("Оценка: C");
}
else
{
    Console.WriteLine("Оценка: F");
}
```

#### **Тернарный оператор (`? :`)**

Это сокращенная форма оператора `if-else`, которая возвращает значение. Идеально подходит для простых присваиваний.

**Синтаксис:**
`результат = (условие) ? значение_если_истина : значение_если_ложь;`

**Пример:**
```csharp
// Сравнение с if-else
int age = 20;
string status;
if (age >= 18)
{
    status = "Взрослый";
}
else
{
    status = "Несовершеннолетний";
}

// Тот же код с тернарным оператором
string status = (age >= 18) ? "Взрослый" : "Несовершеннолетний";
Console.WriteLine(status); // Выведет: "Взрослый"
```

#### **Оператор выбора `switch`**

Используется, когда нужно сравнить одну переменную или выражение с множеством значений. Читается лучше, чем длинная цепочка `if-else if`.

**Синтаксис:**
```csharp
switch (выражение)
{
    case значение1:
        // код для значение1
        break;
    case значение2:
        // код для значение2
        break;
    // ...
    default:
        // код, если ни один case не подошел
        break;
}
```

**Пример:**
```csharp
DayOfWeek day = DayOfWeek.Wednesday;

switch (day)
{
    case DayOfWeek.Monday:
        Console.WriteLine("Понедельник: ненавистный день.");
        break;
    case DayOfWeek.Wednesday:
        Console.WriteLine("Среда: маленькая пятница!"); // Выполнится этот блок
        break;
    case DayOfWeek.Friday:
        Console.WriteLine("Пятница! Ура!");
        break;
    default:
        Console.WriteLine("Обычный день.");
        break;
}
```

**Начиная с C# 8.0**, появились более выразительные `switch expressions`:
```csharp
string message = day switch
{
    DayOfWeek.Monday => "Ненавистный день",
    DayOfWeek.Wednesday => "Маленькая пятница!",
    DayOfWeek.Friday => "Ура!",
    _ => "Обычный день" // _ - оператор отбрасывания
};
Console.WriteLine(message);
```

---

### **3. Циклы**

Циклы позволяют выполнять один и тот же блок кода несколько раз.

#### **Цикл `while`**

Выполняет блок кода **пока** условие истинно. Условие проверяется **перед** каждой итерацией.

**Синтаксис:**
```csharp
while (условие)
{
    // Тело цикла
}
```

**Пример:**
```csharp
// Пример: Обратный отсчет
int counter = 5;
while (counter > 0)
{
    Console.WriteLine($"Осталось: {counter} сек.");
    counter--; // Уменьшаем счетчик. Важно! Иначе цикл будет бесконечным.
}
Console.WriteLine("Старт!");
// Вывод:
// Осталось: 5 сек.
// Осталось: 4 сек.
// ... 
// Осталось: 1 сек.
// Старт!
```

#### **Цикл `do...while`**

Похож на `while`, но условие проверяется **после** выполнения тела цикла. Это гарантирует, что тело цикла выполнится **хотя бы один раз**.

**Синтаксис:**
```csharp
do
{
    // Тело цикла
} while (условие);
```

**Пример:**
```csharp
// Пример: Запрос ввода от пользователя, пока он не введет корректные данные
string userInput;
do
{
    Console.Write("Введите 'yes' или 'no': ");
    userInput = Console.ReadLine();
} while (userInput != "yes" && userInput != "no");

Console.WriteLine($"Вы ввели: {userInput}");
```

#### **Цикл `for`**

Идеален для ситуаций, когда известно точное количество итераций. Объединяет **инициализацию**, **проверку условия** и **изменение счетчика** в одной строке.

**Синтаксис:**
```csharp
for (инициализация; условие; итератор)
{
    // Тело цикла
}
```

**Примеры:**
```csharp
// Пример 1: Классический for
for (int i = 0; i < 5; i++)
{
    Console.WriteLine(i); // Выведет 0, 1, 2, 3, 4
}

// Пример 2: Вывод массива
string[] fruits = { "apple", "banana", "orange" };
for (int i = 0; i < fruits.Length; i++)
{
    Console.WriteLine(fruits[i]);
}
// Вывод:
// apple
// banana
// orange
```

#### **Цикл `foreach`**

Используется для **перебора всех элементов в коллекции** (массиве, списке и т.д.). Он проще и безопаснее `for`, так как не требует управления индексом.

**Синтаксис:**
```csharp
foreach (тип_элемента переменная in коллекция)
{
    // Тело цикла
}
```

**Пример:**
```csharp
string[] fruits = { "apple", "banana", "orange" };

// foreach читается как "для каждого элемента в коллекции"
foreach (string fruit in fruits)
{
    Console.WriteLine(fruit);
}
// Вывод тот же, что и в примере с for, но код короче и чище.
```

#### **Ключевые слова `break` и `continue`**

*   `break` - немедленно **прерывает выполнение цикла** (или `switch`). Управление передается строке, следующей за циклом.
*   `continue` - немедленно **прерывает текущую итерацию** цикла и переходит к **следующей** итерации.

**Пример:**
```csharp
// Пример с continue и break
for (int i = 0; i < 10; i++)
{
    if (i % 2 == 0) // Если число четное
    {
        continue; // Пропускаем оставшуюся часть цикла и переходим к следующему i
    }
    if (i == 7)
    {
        break; // Выходим из цикла, когда i станет равным 7
    }
    Console.WriteLine(i);
}
// Вывод:
// 1
// 3
// 5
```

---

### **4. Структуры данных**

#### **Массив (`Array`)**

Массив — это простейшая структура данных, представляющая собой **фиксированное** количество элементов **одного типа**, расположенных в памяти друг за другом.

*   **Объявление и инициализация:**
    ```csharp
    // Способ 1
    int[] numbers1 = new int[5]; // массив из 5 целых чисел (по умолчанию 0)

    // Способ 2
    int[] numbers2 = new int[] { 1, 2, 3, 4, 5 };

    // Способ 3 (синтаксический сахар)
    int[] numbers3 = { 1, 2, 3, 4, 5 };
    ```
*   **Доступ к элементам:** По индексу, начиная с 0.
    ```csharp
    numbers3[0] = 10; // Первому элементу присваиваем значение 10
    Console.WriteLine(numbers3[2]); // Выведет: 3
    ```
*   **Свойство `Length`:** Возвращает длину массива.
    ```csharp
    Console.WriteLine(numbers3.Length); // Выведет: 5
    ```
*   **Главный недостаток:** Размер массива нельзя изменить после создания.

#### **Список (`List<T>`)**

Список — это **динамическая** коллекция. Он может увеличиваться и уменьшаться по мере необходимости. Это одна из самых часто используемых структур данных.

*   **Подключение пространства имен:** `using System.Collections.Generic;`
*   **Объявление и инициализация:**
    ```csharp
    List<string> names = new List<string>(); // Создание пустого списка строк
    List<int> scores = new List<int> { 100, 95, 85 }; // Создание списка с начальными значениями
    ```
*   **Основные методы:**
    *   `Add(element)` - добавляет элемент в конец списка.
    *   `Remove(element)` - удаляет первое вхождение элемента.
    *   `Contains(element)` - проверяет, содержится ли элемент в списке.
    *   `Count` - возвращает количество элементов.

    **Пример:**
    ```csharp
    List<string> fruits = new List<string>();
    fruits.Add("apple");
    fruits.Add("banana");
    fruits.Add("orange");
    fruits.Add("banana");

    Console.WriteLine(fruits.Count); // 4
    Console.WriteLine(fruits[1]); // banana

    fruits.Remove("banana"); // Удалится только первая "banana"

    foreach (string fruit in fruits)
    {
        Console.Write(fruit + " "); // apple orange banana
    }
    ```

#### **Словарь (`Dictionary<TKey, TValue>`)**

Словарь хранит данные в виде пар **ключ-значение**. Ключ должен быть уникальным. Поиск по ключу происходит очень быстро.

*   **Объявление и инициализация:**
    ```csharp
    Dictionary<string, int> ages = new Dictionary<string, int>();
    ```
*   **Добавление и получение элементов:**
    ```csharp
    ages["Alice"] = 30; // Добавление по индексатору
    ages.Add("Bob", 25); // Добавление через метод Add

    Console.WriteLine(ages["Alice"]); // Получение значения по ключу -> 30
    ```
*   **Проверка существования ключа:** Перед обращением к несуществующему ключу лучше проверить его.
    ```csharp
    if (ages.ContainsKey("Charlie"))
    {
        Console.WriteLine(ages["Charlie"]);
    }
    else
    {
        Console.WriteLine("Ключ 'Charlie' не найден.");
    }
    ```
*   **Перебор словаря:**
    ```csharp
    foreach (KeyValuePair<string, int> pair in ages)
    {
        Console.WriteLine($"Имя: {pair.Key}, Возраст: {pair.Value}");
    }
    // Вывод:
    // Имя: Alice, Возраст: 30
    // Имя: Bob, Возраст: 25
    ```

---

### **5. Резюме**

*   **Условные выражения (`if-else`, `switch`)** позволяют управлять потоком выполнения программы, делая ее "интеллектуальной" и способной принимать решения.
*   **Циклы (`while`, `do-while`, `for`, `foreach`)** избавляют нас от написания повторяющегося кода, позволяя эффективно обрабатывать наборы данных.
*   **Структуры данных** помогают организовать информацию.
    *   **Массивы** хороши, когда размер коллекции известен и не меняется.
    *   **Списки (`List<T>`)** — это ваша "рабочая лошадка" для динамических коллекций.
    *   **Словари (`Dictionary<TKey, TValue>`)** — идеальный выбор для быстрого поиска значения по уникальному ключу.

Комбинируя эти конструкции, вы можете создавать сложную и мощную логику для любых приложений .NET.

---

### **6. Контрольные вопросы**

1.  В чем основное различие между оператором `if-else` и тернарным оператором? В каком случае предпочтительнее использовать каждый из них?
2.  Объясните разницу между циклом `while` и `do...while`. Приведите пример задачи, где использование `do...while` было бы необходимым или более удобным.
3.  Чем цикл `for` принципиально отличается от цикла `foreach`? Можно ли всегда использовать `foreach` вместо `for` для перебора массива?
4.  Что произойдет, если в цикле `while` не предусмотреть изменение переменной, влияющей на условие выхода?
5.  В чем главное преимущество `List<T>` перед обычным массивом? Назовите два основных метода для добавления и удаления элементов из списка.
6.  Какова основная задача словаря (`Dictionary<TKey, TValue>`)? Почему ключ в словаре должен быть уникальным? Что произойдет при попытке добавить два значения с одинаковым ключом?
7.  Объясните, для чего используются ключевые слова `break` и `continue` внутри циклов.
8.  Создайте условную конструкцию, используя `switch`, которая в зависимости от номера месяца (1-12) выводит название времени года.
9.  Напишите код с циклом `for`, который выводит только четные числа от 0 до 10.
10. Представьте, что вы создаете программу для учета студентов. Какую структуру данных вы бы использовали для хранения списка имен студентов? А для хранения информации о студенте (ID, имя, оценка), если нужен быстрый поиск по ID? Обоснуйте свой выбор.